/* Shell geral (lista + chat) */
.dm-shell {
  height: 100vh;
  display: grid;
  grid-template-columns: 360px 1fr;
  gap: 1px;
  background: #0b0b0b;
  border-left: 1px solid #1f1f1f;
}

/* Lista */
.dm-list {
  background: #0e0e0e;
  border-right: 1px solid #1f1f1f;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}
.dm-list__header {
  padding: 16px 16px;
  border-bottom: 1px solid #1f1f1f;
  height: 64px; display: flex; align-items: center; color: #fff;
}
.dm-list__search { padding: 10px 12px; }
.dm-list__search .search-icon,
.dm-list__search .form-control,
.dm-list__search .search-input {
  background: #191919 !important;
  border: 1px solid #262626 !important;
  color: #c9c9c9 !important;
}
.dm-list__search .search-icon { border-right: 0 !important; border-radius: 10px 0 0 10px !important; }
.dm-list__search .search-input { border-left: 0 !important; border-radius: 0 10px 10px 0 !important; }
.dm-list__threads { overflow: auto; padding: 6px 0; }

/* Itens de conversa */
.conversation-item {
  display: grid; grid-template-columns: 56px 1fr auto;
  gap: 12px; align-items: center; padding: 10px 16px;
  cursor: pointer; transition: background 0.15s ease; color: #e7e7e7;
}
.conversation-item:hover { background: #161616; }
.conversation-item.active { background: #1b1b1b; }
.profile-icon-wrapper { width: 56px; height: 56px; border-radius: 50%; overflow: hidden; }
.conversation-item .profile-icon { width: 100%; height: 100%; object-fit: cover; }
.conversation-details { min-width: 0; }
.conversation-details .participant-name { font-weight: 600; color: #f5f5f5; font-size: .95rem; }
.conversation-details .last-message {
  font-size: .86rem; color: #a8a8a8; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.timestamp-col { display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
.conversation-item .timestamp { font-size: .74rem; color: #9a9a9a; white-space: nowrap; }
.unread-dot { width: 8px; height: 8px; background: #f0c04a; border-radius: 50%; margin-top: 6px; }

/* Chat */
.dm-chat { background: #0b0b0b; min-width: 0; }
.dm-chat__wrapper {
  display: grid; grid-template-rows: auto 1fr auto;
  height: 100%; min-height: 0;
}
.dm-chat__header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; border-bottom: 1px solid #1f1f1f;
  min-height: 64px; background: #0b0b0b; position: sticky; top: 0; z-index: 2;
}
.peer { display: flex; align-items: center; gap: 10px; }
.peer-avatar { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }
.peer-meta { display: flex; flex-direction: column; line-height: 1.1; }
.peer-name { color: #fff; font-weight: 600; }
.peer-sub { color: #a8a8a8; font-size: 12px; }
.dm-chat__actions { display: flex; align-items: center; gap: 6px; }
.btn-ghost { background: transparent; border: 0; color: #c9c9c9; padding: 8px; border-radius: 10px; }
.btn-ghost:hover { background: #1a1a1a; color: #fff; }

.dm-chat__scroll { min-height: 0; overflow: auto; height: 100%; background: #0b0b0b; }
.dm-chat__content { width: 100%; max-width: 900px; margin: 0 auto; padding: 16px; }

.message-row { display: flex; align-items: flex-end; gap: 10px; margin: 10px 0; }
.message-row.sent { justify-content: flex-end; }
.message-row.received { justify-content: flex-start; }
.chat-avatar { width: 28px; height: 28px; border-radius: 50%; object-fit: cover; flex-shrink: 0; }
.message-bubble {
  max-width: 70%; padding: 10px 14px; border-radius: 18px;
  font-size: .95rem; line-height: 1.4; word-wrap: break-word;
}
.message-bubble.received { background: #262626; color: #f5f5f5; }
.message-bubble.sent { background: #3797f0; color: #fff; }

.dm-chat__input { border-top: 1px solid #1f1f1f; padding: 10px; background: #0b0b0b; position: sticky; bottom: 0; z-index: 2; }
.message-input { background: transparent !important; color: #fff !important; border: 1px solid #262626 !important; border-radius: 20px !important; }
.send-btn { background: transparent; border: 0; color: #3797f0; font-size: 1.05rem; padding: 0 10px; }

.dm-chat__empty { height: 100%; display: grid; place-items: center; color: #a8a8a8; }
.messages-loading { display: grid; place-items: center; height: 100vh; color: #fff; }

/* Correção de alturas p/ o scroll funcionar */
.dm-chat, .dm-list { min-height: 0; }

/* Mobile */
@media (max-width: 992px) {
  .dm-shell { grid-template-columns: 1fr; }
  .dm-list { display: none; }
  .dm-list:not(.is-hidden-mobile) { display: block; }
  .show-list-mobile { display: inline-flex; }
  .dm-chat__content { max-width: 100%; padding: 12px; }
}
@media (min-width: 993px) { .show-list-mobile { display: none; } }

/* Scrollbar sutil */
.dm-list__threads::-webkit-scrollbar,
.dm-chat__scroll::-webkit-scrollbar { width: 10px; }
.dm-list__threads::-webkit-scrollbar-thumb,
.dm-chat__scroll::-webkit-scrollbar-thumb { background: #1f1f1f; border-radius: 999px; }
.dm-list__threads:hover::-webkit-scrollbar-thumb,
.dm-chat__scroll:hover::-webkit-scrollbar-thumb { background: #2a2a2a; }
